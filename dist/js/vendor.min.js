!function(){if(window.CustomEvent||!document.createEventObject)try{new CustomEvent("test")}catch(e){var t=function(e,t){if(!arguments.length)throw new Error("Not enough arguments");var s={bubbles:!1,cancelable:!1,detail:null};for(var i in t)s[i]=t[i];var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,s.bubbles,s.cancelable,s.detail),n};t.prototype=(window.CustomEvent||window.Event).prototype,window.CustomEvent=t}else window.CustomEvent=function(e,t){if(!arguments.length)throw new Error("Not enough arguments");var s={type:e,bubbles:!1,cancelable:!1,detail:null},i=document.createEventObject();for(var n in s)i[n]=s[n];for(var n in t)i[n]=t[n];return i}}(),function(){if(!document.addEventListener&&window.Element&&window.Event){var u="__events",f="__immediateStopped";Event.prototype.NONE=Event.NONE=0,Event.prototype.CAPTURING_PHASE=Event.CAPTURING_PHASE=1,Event.prototype.AT_TARGET=Event.AT_TARGET=2,Event.prototype.BUBBLING_PHASE=Event.BUBBLING_PHASE=3,Event.prototype.preventDefault=function(){!1!==this.cancelable&&(this.returnValue=!1)},Event.prototype.stopPropagation=function(){this.cancelBubble=!0},Event.prototype.stopImmediatePropagation=function(){this[f]=this.cancelBubble=!0};for(var r=function(e,t,s){for(var i=0;i<e.length;i++){var n=e[i];if(n.useCapture==s&&n.listener==t)return i}return-1},n=function(e,t,s){e.eventPhase=s;for(var i=0;i<t.length;i++){for(var n=t[i],a=[],o=(n[u]||{})[e.type]||[],r=0;r<o.length;r++){var l=o[r];l.useCapture&&s==Event.BUBBLING_PHASE||(l.useCapture||s!=Event.CAPTURING_PHASE)&&a.push(l.listener)}for(r=0;r<a.length;)try{for(;r<a.length;){var d=a[r++];if(c=d,p=n,(h=e).currentTarget=p,"function"==typeof c?c.call(p,h):c.handleEvent(h),e[f])return!0}}catch(e){setTimeout(function(){throw e},0)}if(e.cancelBubble)return!0}var h,c,p;return!1},l=function(e){var t,s;s=this,(t=e).timeStamp=+new Date,t.target||(t.target=t.srcElement||s),t.pageX=t.clientX+document.documentElement.scrollLeft,t.pageY=t.clientY+document.documentElement.scrollTop,"mouseover"==t.type?t.relatedTarget=t.fromElement:"mouseout"==t.type?t.relatedTarget=t.toElement:t.relatedTarget=null;var i=function(e){for(var t=[];e.parentNode;)t.unshift(e.parentNode),e=e.parentNode;return t}(e.target);return i.length&&n(e,i,Event.CAPTURING_PHASE)||n(e,[e.target],Event.AT_TARGET)||i.length&&!1!==e.bubbles&&(i.reverse(),n(e,i,Event.BUBBLING_PHASE))||e.stopPropagation(),e.returnValue},e={addEventListener:function(e,t,s){var i=this,n=(this[u]||{})[e]||[],a=n.length;if(!(-1<r(n,t,s))){if(u in this)var o=this[u];else{o={_handler:function(){l.apply(i,arguments)}};this[u]=o}e in o||(o[e]=[]),o[e].push({listener:t,useCapture:s}),a||this.attachEvent("on"+e,o._handler)}},removeEventListener:function(e,t,s){var i=(this[u]||{})[e]||[],n=r(i,t,s);-1!=n&&(i.splice(n,1),i.length||this.detachEvent("on"+e,this[u]._handler))},dispatchEvent:function(e){return e.returnValue=!0,l.call(this,e)}},t=[Element,window.constructor,document.constructor];t.length;){var s=t.pop();for(var i in e)s.prototype[i]=e[i]}}}(),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var s,i;if(null==this)throw new TypeError(" this is null or not defined");var n=Object(this),a=n.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(s=t),i=0;i<a;){var o;i in n&&(o=n[i],e.call(s,o,i,n)),i++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var s;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return-1;var a=+t||0;if(Math.abs(a)===1/0&&(a=0),n<=a)return-1;for(s=Math.max(0<=a?a:n-Math.abs(a),0);s<n;){if(s in i&&i[s]===e)return s;s++}return-1}),function(e){var t;if("object"==typeof exports){try{t=require("jquery")}catch(e){}module.exports=e(window,document,t)}else"function"==typeof define&&define.amd?define([],function(){return e(window,document,window.jQuery)}):window.Dropkick=e(window,document,window.jQuery)}(function(d,h,t,c){var n,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o=d.parent!==d.self,r=-1!==navigator.appVersion.indexOf("MSIE"),l=function(e,t){var s,i;if(this===d)return new l(e,t);for("string"==typeof e&&"#"===e[0]&&(e=h.getElementById(e.substr(1))),s=0;s<l.uid;s++)if((i=l.cache[s])instanceof l&&i.data.select===e)return u.extend(i.data.settings,t),i;return e?e.length<1?(console.error("You must have options inside your <select>: ",e),!1):"SELECT"===e.nodeName?this.init(e,t):void 0:(console.error("You must pass a select to DropKick"),!1)},e=function(){},p={initialize:e,mobile:!1,change:e,open:e,close:e,search:"strict",bubble:!0},u={hasClass:function(e,t){var s=new RegExp("(^|\\s+)"+t+"(\\s+|$)");return e&&s.test(e.className)},addClass:function(e,t){e&&!u.hasClass(e,t)&&(e.className+=" "+t)},removeClass:function(e,t){var s=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e&&(e.className=e.className.replace(s," "))},toggleClass:function(e,t){var s=u.hasClass(e,t)?"remove":"add";u[s+"Class"](e,t)},extend:function(s){return Array.prototype.slice.call(arguments,1).forEach(function(e){if(e)for(var t in e)s[t]=e[t]}),s},offset:function(e){var t=e.getBoundingClientRect()||{top:0,left:0},s=h.documentElement,i=r?s.scrollTop:d.pageYOffset,n=r?s.scrollLeft:d.pageXOffset;return{top:t.top+i-s.clientTop,left:t.left+n-s.clientLeft}},position:function(e,t){for(var s={top:0,left:0};e&&e!==t;)s.top+=e.offsetTop,s.left+=e.offsetLeft,e=e.parentNode;return s},closest:function(e,t){for(;e;){if(e===t)return e;e=e.parentNode}return!1},create:function(e,t){var s,i=h.createElement(e);for(s in t||(t={}),t)t.hasOwnProperty(s)&&("innerHTML"===s?i.innerHTML=t[s]:i.setAttribute(s,t[s]));return i},deferred:function(s){return function(){var e=arguments,t=this;d.setTimeout(function(){s.apply(t,e)},1)}}};return l.cache={},l.uid=0,l.prototype={add:function(e,t){var s,i,n;"string"==typeof e&&(s=e,(e=h.createElement("option")).text=s),"OPTION"===e.nodeName&&(i=u.create("li",{class:"dk-option","data-value":e.value,text:e.text,innerHTML:e.innerHTML,role:"option","aria-selected":"false",id:"dk"+this.data.cacheID+"-"+(e.id||e.value.replace(" ","-"))}),u.addClass(i,e.className),this.length+=1,e.disabled&&(u.addClass(i,"dk-option-disabled"),i.setAttribute("aria-disabled","true")),e.hidden&&(u.addClass(i,"dk-option-hidden"),i.setAttribute("aria-hidden","true")),this.data.select.add(e,t),"number"==typeof t&&(t=this.item(t)),-1<(n=this.options.indexOf(t))?(t.parentNode.insertBefore(i,t),this.options.splice(n,0,i)):(this.data.elem.lastChild.appendChild(i),this.options.push(i)),i.addEventListener("mouseover",this),e.selected&&this.select(n))},item:function(e){return e=e<0?this.options.length+e:e,this.options[e]||null},remove:function(e){var t=this.item(e);t.parentNode.removeChild(t),this.options.splice(e,1),this.data.select.remove(e),this.select(this.data.select.selectedIndex),this.length-=1},init:function(e,t){var s,i=l.build(e,"dk"+l.uid);if(this.data={},this.data.select=e,this.data.elem=i.elem,this.data.settings=u.extend({},p,t),this.disabled=e.disabled,this.form=e.form,this.length=e.length,this.multiple=e.multiple,this.options=i.options.slice(0),this.selectedIndex=e.selectedIndex,this.selectedOptions=i.selected.slice(0),this.value=e.value,this.data.cacheID=l.uid,(l.cache[this.data.cacheID]=this).data.settings.initialize.call(this),l.uid+=1,this._changeListener||(e.addEventListener("change",this),this._changeListener=!0),!a||this.data.settings.mobile){if(e.parentNode.insertBefore(this.data.elem,e),e.setAttribute("data-dkCacheId",this.data.cacheID),this.data.elem.addEventListener("click",this),this.data.elem.addEventListener("keydown",this),this.data.elem.addEventListener("keypress",this),this.form&&this.form.addEventListener("reset",this),!this.multiple)for(s=0;s<this.options.length;s++)this.options[s].addEventListener("mouseover",this);n||(h.addEventListener("click",l.onDocClick),o&&parent.document.addEventListener("click",l.onDocClick),n=!0)}return this},close:function(){var e,t=this.data.elem;if(!this.isOpen||this.multiple)return!1;for(e=0;e<this.options.length;e++)u.removeClass(this.options[e],"dk-option-highlight");t.lastChild.setAttribute("aria-expanded","false"),u.removeClass(t.lastChild,"dk-select-options-highlight"),u.removeClass(t,"dk-select-open-(up|down)"),this.isOpen=!1,this.data.settings.close.call(this)},open:u.deferred(function(){var e,t,s,i,n=this.data.elem,a=n.lastChild,o=d.pageXOffset!==c,r="CSS1Compat"===(h.compatMode||""),l=o?d.pageYOffset:r?h.documentElement.scrollTop:h.body.scrollTop;return s=u.offset(n).top-l,i=d.innerHeight-(s+n.offsetHeight),!this.isOpen&&!this.multiple&&(a.style.display="block",e=a.offsetHeight,a.style.display="",t=e<s&&!(e<i)?"-up":"-down",this.isOpen=!0,u.addClass(n,"dk-select-open"+t),a.setAttribute("aria-expanded","true"),this._scrollTo(this.options.length-1),this._scrollTo(this.selectedIndex),void this.data.settings.open.call(this))}),disable:function(e,t){var s="dk-option-disabled";0!==arguments.length&&"boolean"!=typeof e||(t=e===c,e=this.data.elem,s="dk-select-disabled",this.disabled=t),t===c&&(t=!0),"number"==typeof e&&(e=this.item(e)),t?(e.setAttribute("aria-disabled",!0),u.addClass(e,s)):(e.setAttribute("aria-disabled",!1),u.removeClass(e,s))},hide:function(e,t){var s="dk-option-hidden";t===c&&(t=!0),e=this.item(e),t?(e.setAttribute("aria-hidden",!0),u.addClass(e,s)):(e.setAttribute("aria-hidden",!1),u.removeClass(e,s))},select:function(e,t){var s,i,n,a,o=this.data.select;if("number"==typeof e&&(e=this.item(e)),"string"==typeof e)for(s=0;s<this.length;s++)this.options[s].getAttribute("data-value")===e&&(e=this.options[s]);return!(!e||"string"==typeof e||!t&&u.hasClass(e,"dk-option-disabled"))&&(u.hasClass(e,"dk-option")?(i=this.options.indexOf(e),n=o.options[i],this.multiple?(u.toggleClass(e,"dk-option-selected"),n.selected=!n.selected,u.hasClass(e,"dk-option-selected")?(e.setAttribute("aria-selected","true"),this.selectedOptions.push(e)):(e.setAttribute("aria-selected","false"),i=this.selectedOptions.indexOf(e),this.selectedOptions.splice(i,1))):(a=this.data.elem.firstChild,this.selectedOptions.length&&(u.removeClass(this.selectedOptions[0],"dk-option-selected"),this.selectedOptions[0].setAttribute("aria-selected","false")),u.addClass(e,"dk-option-selected"),e.setAttribute("aria-selected","true"),a.setAttribute("aria-activedescendant",e.id),a.className="dk-selected "+n.className,a.innerHTML=n.innerHTML,this.selectedOptions[0]=e,n.selected=!0),this.selectedIndex=o.selectedIndex,this.value=o.value,t||this.data.select.dispatchEvent(new CustomEvent("change",{bubbles:this.data.settings.bubble})),e):void 0)},selectOne:function(e,t){return this.reset(!0),this._scrollTo(e),this.select(e,t)},search:function(e,t){var s,i,n,a,o,r,l,d,h=this.data.select.options,c=[];if(!e)return this.options;for(t="fuzzy"===(t=t?t.toLowerCase():"strict")?2:"partial"===t?1:0,d=new RegExp((t?"":"^")+e,"i"),s=0;s<h.length;s++)if(n=h[s].text.toLowerCase(),2==t){for(i=e.toLowerCase().split(""),a=o=r=l=0;o<n.length;)n[o]===i[a]?(r+=1+r,a++):r=0,l+=r,o++;a===i.length&&c.push({e:this.options[s],s:l,i:s})}else d.test(n)&&c.push(this.options[s]);return 2===t&&(c=c.sort(function(e,t){return t.s-e.s||e.i-t.i}).reduce(function(e,t){return e[e.length]=t.e,e},[])),c},focus:function(){this.disabled||(this.multiple?this.data.elem:this.data.elem.children[0]).focus()},reset:function(e){var t,s=this.data.select;for(t=this.selectedOptions.length=0;t<s.options.length;t++)s.options[t].selected=!1,u.removeClass(this.options[t],"dk-option-selected"),this.options[t].setAttribute("aria-selected","false"),!e&&s.options[t].defaultSelected&&this.select(t,!0);this.selectedOptions.length||this.multiple||this.select(0,!0)},refresh:function(){0<Object.keys(this).length&&(!a||this.data.settings.mobile)&&this.dispose().init(this.data.select,this.data.settings)},dispose:function(){return 0<Object.keys(this).length&&(!a||this.data.settings.mobile)&&(delete l.cache[this.data.cacheID],this.data.elem.parentNode.removeChild(this.data.elem),this.data.select.removeAttribute("data-dkCacheId")),this},handleEvent:function(e){if(!this.disabled)switch(e.type){case"click":this._delegate(e);break;case"keydown":this._keyHandler(e);break;case"keypress":this._searchOptions(e);break;case"mouseover":this._highlight(e);break;case"reset":this.reset();break;case"change":this.data.settings.change.call(this)}},_delegate:function(e){var t,s,i,n,a=e.target;if(u.hasClass(a,"dk-option-disabled"))return!1;if(this.multiple){if(u.hasClass(a,"dk-option"))if("Range"===(t=d.getSelection()).type&&t.collapseToStart(),e.shiftKey)if(i=this.options.indexOf(this.selectedOptions[0]),n=this.options.indexOf(this.selectedOptions[this.selectedOptions.length-1]),i<(s=this.options.indexOf(a))&&s<n&&(s=i),n<s&&i<n&&(n=i),this.reset(!0),s<n)for(;s<n+1;)this.select(s++);else for(;n-1<s;)this.select(s--);else e.ctrlKey||e.metaKey||this.reset(!0),this.select(a)}else this[this.isOpen?"close":"open"](),u.hasClass(a,"dk-option")&&this.select(a)},_highlight:function(e){var t,s=e.target;if(!this.multiple){for(t=0;t<this.options.length;t++)u.removeClass(this.options[t],"dk-option-highlight");u.addClass(this.data.elem.lastChild,"dk-select-options-highlight"),u.addClass(s,"dk-option-highlight")}},_keyHandler:function(e){var t,s,i=this.selectedOptions,n=this.options,a=1,o=9,r=13,l=27,d=32,h=38,c=40;switch(e.keyCode){case h:a=-1;case c:if(e.preventDefault(),t=i[i.length-1],u.hasClass(this.data.elem.lastChild,"dk-select-options-highlight"))for(u.removeClass(this.data.elem.lastChild,"dk-select-options-highlight"),s=0;s<n.length;s++)u.hasClass(n[s],"dk-option-highlight")&&(u.removeClass(n[s],"dk-option-highlight"),t=n[s]);(a=n.indexOf(t)+a)>n.length-1?a=n.length-1:a<0&&(a=0),this.data.select.options[a].disabled||(this.reset(!0),this.select(a),this._scrollTo(a));break;case d:if(!this.isOpen){e.preventDefault(),this.open();break}case o:case r:for(a=0;a<n.length;a++)u.hasClass(n[a],"dk-option-highlight")&&this.select(a);case l:this.isOpen&&(e.preventDefault(),this.close())}},_searchOptions:function(e){var t,s=this,i=String.fromCharCode(e.keyCode||e.which);this.data.searchString===c&&(this.data.searchString=""),s.data.searchTimeout&&clearTimeout(s.data.searchTimeout),s.data.searchTimeout=setTimeout(function(){s.data.searchString=""},1e3),this.data.searchString+=i,(t=this.search(this.data.searchString,this.data.settings.search)).length&&(u.hasClass(t[0],"dk-option-disabled")||this.selectOne(t[0]))},_scrollTo:function(e){var t,s,i=this.data.elem.lastChild;return!(-1===e||"number"!=typeof e&&!e||!this.isOpen&&!this.multiple)&&("number"==typeof e&&(e=this.item(e)),void((s=(t=u.position(e,i).top)-i.scrollTop)+e.offsetHeight>i.offsetHeight?(t+=e.offsetHeight,i.scrollTop=t-i.offsetHeight):s<0&&(i.scrollTop=t)))}},l.build=function(e,o){var t,s,i,n=[],r={elem:null,options:[],selected:[]},l=function(e){var t,s,i,n,a=[];switch(e.nodeName){case"OPTION":t=u.create("li",{class:"dk-option ","data-value":e.value,text:e.text,innerHTML:e.innerHTML,role:"option","aria-selected":"false",id:o+"-"+(e.id||e.value.replace(" ","-"))}),u.addClass(t,e.className),e.disabled&&(u.addClass(t,"dk-option-disabled"),t.setAttribute("aria-disabled","true")),e.hidden&&(u.addClass(t,"dk-option-hidden"),t.setAttribute("aria-hidden","true")),e.selected&&(u.addClass(t,"dk-option-selected"),t.setAttribute("aria-selected","true"),r.selected.push(t)),r.options.push(this.appendChild(t));break;case"OPTGROUP":for(s=u.create("li",{class:"dk-optgroup"}),e.label&&s.appendChild(u.create("div",{class:"dk-optgroup-label",innerHTML:e.label})),i=u.create("ul",{class:"dk-optgroup-options"}),n=e.children.length;n--;a.unshift(e.children[n]));a.forEach(l,i),this.appendChild(s).appendChild(i)}};for(r.elem=u.create("div",{class:"dk-select"+(e.multiple?"-multi":"")}),s=u.create("ul",{class:"dk-select-options",id:o+"-listbox",role:"listbox"}),e.disabled&&(u.addClass(r.elem,"dk-select-disabled"),r.elem.setAttribute("aria-disabled",!0)),r.elem.id=o+(e.id?"-"+e.id:""),u.addClass(r.elem,e.className),e.multiple?(r.elem.setAttribute("tabindex",e.getAttribute("tabindex")||"0"),s.setAttribute("aria-multiselectable","true")):(t=e.options[e.selectedIndex],r.elem.appendChild(u.create("div",{class:"dk-selected "+t.className,tabindex:e.tabindex||0,innerHTML:t?t.text:"&nbsp;",id:o+"-combobox","aria-live":"assertive","aria-owns":s.id,role:"combobox"})),s.setAttribute("aria-expanded","false")),i=e.children.length;i--;n.unshift(e.children[i]));return n.forEach(l,r.elem.appendChild(s)),r},l.onDocClick=function(e){var t,s;if(1!==e.target.nodeType)return!1;for(s in null!==(t=e.target.getAttribute("data-dkcacheid"))&&l.cache[t].focus(),l.cache)u.closest(e.target,l.cache[s].data.elem)||s===t||l.cache[s].disabled||l.cache[s].close()},t!==c&&(t.fn.dropkick=function(){var e=Array.prototype.slice.call(arguments);return t(this).each(function(){e[0]&&"object"!=typeof e[0]?"string"==typeof e[0]&&l.prototype[e[0]].apply(new l(this),e.slice(1)):new l(this,e[0]||{})})}),l});